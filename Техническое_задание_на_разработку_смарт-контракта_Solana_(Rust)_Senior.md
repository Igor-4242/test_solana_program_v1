# Техническое задание на разработку смарт-контракта Solana (Rust) Senior.

## **Описание задачи**

Необходимо разработать смарт-контракт (Solana Program) на языке Rust, позволяющий автоматически приобретать указанный SPL-токен, используя заданную сумму токена-котировки (например, WSOL). Контракт должен определять доступность токена на DEX (Raydium v4 или Meteora Dynamic Pools v1), выполнять обмен и возвращать детальную информацию о результате транзакции.

## **Функциональные требования**

### **Входные параметры:**

Контракт должен принимать следующие параметры:

* `token_mint` (Pubkey): адрес SPL-токена для покупки.  
* `quote_mint` (Pubkey, по умолчанию WSOL): адрес токена-котировки.  
* `amount_in` (u64): сумма в токене-котировке, которую необходимо обменять.  
* `min_amount_out` (u64): минимальное приемлемое количество токена для защиты от проскальзывания.

### **Обязательные функции:**

1. **Определение DEX:**  
   * Контракт должен автоматически определять доступность токена (`token_mint`) в торговых пулах на поддерживаемых DEX (Raydium v4 или Meteora Dynamic Pools v1).  
2. **Выполнение обмена:**  
   * После определения подходящего DEX, контракт должен выполнить обмен через соответствующий пул ликвидности с использованием Cross-Program Invocation (CPI).  
3. **Возврат результатов:**  
   * Успех или ошибка транзакции (с подробным логированием или использованием Anchor Events).  
   * Количество фактически полученного токена после обмена (`amount_out`).  
   * Размер уплаченной комиссии.

### **Обработка ошибок:**

Контракт должен четко обрабатывать и логировать ошибки:

* Недостаточная ликвидность.  
* Слишком большое проскальзывание (получено меньше, чем указано в `min_amount_out`).  
* Неверные или некорректные параметры.

## **Требования к реализации**

### **Язык и инструменты:**

* Язык программирования: Rust.  
* Используемый фреймворк: Anchor.  
* Используемые инструменты: Pinnocio, Clippy, Rustfmt.

### **Качество и модульность кода:**

* Следование высоким стандартам написания чистого, безопасного и производительного кода.  
* Максимальная модульность и абстракция логики выбора DEX и CPI-вызовов для простоты расширения (например, при добавлении новых DEX).

### **Тестирование:**

* Тестирование не является обязательным.

## **Формат сдачи задания**

* Исходный код должен быть размещен в репозитории GitHub.  
* Наличие инструкций по запуску и проверке функциональности контракта.  
* Наличие комментариев и описания архитектурных решений будет большим плюсом.

